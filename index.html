<!DOCTYPE html>
<html lang="en">

<head>
    <title>Order 3D-printed food!</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">



    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.15.1/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
    <script nomodule src="https://unpkg.com/@google/model-viewer/dist/model-viewer-legacy.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="./jquery.datetimepicker.full.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/pikaday/css/pikaday.css">
    <script src="https://cdn.jsdelivr.net/npm/pikaday/pikaday.js"></script>



    <link rel="stylesheet" href="./jquery.datetimepicker.min.css">

    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/10.16.6/sweetalert2.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/10.16.6/sweetalert2.min.js"></script>

</head>

<style>
    .demo label {
        font-size: 16px;
        text-align: center;
        margin-left: 75px;
    }

    .demo {
        background: transparent;
        box-shadow: rgb(0 0 0 / 20%) 0px 0px 14px 0px;
        margin: 20px 5px;
        padding: 0px 1px;
    }

    p,
    span {
        font-family: Arial, sans-serif;
        color: #979797;
        font-size: 16px;
    }

    .carousel {
        display: flex;
        overflow-x: scroll;
        width: 100%;
        scroll-snap-type: x mandatory;
    }

    .carousel-item {
        flex: 0 0 auto;
        scroll-snap-align: start;
        margin-right: 20px;
    }



    .carousel-item:last-child {
        margin-right: 0;
    }

    .demo {
        background: transparent;
    }

    .my-toast {
        height: 60vh;
    }

    input:focus {
        border-bottom: 2px solid rgb(0,195,199) !important;
    }


    .checkbox-inline+.checkbox-inline,
    .radio-inline+.radio-inline {
        margin-left: 0;
    }

    .panel-primary {
        border: 0px;
    }

    .panel-heading {
        font-size: 22px;
        text-align: center;
    }

    #color_description {
        margin-top: 30px;
    }

    .demo model-viewer {
        height: 200px;
        width: 200px;
    }



    @media(max-width:768px) {
        .demo model-viewer {
            height: 210px;
            width: 210px;
        }

        .demo label {
            margin-left: 40px;
        }


    }
</style>

<body>
    <div class="container">
        <div class="panel panel-primary">
            <br>
            <div class="panel-heading" style="background-color: #00C3C7;">TASTE TOMORROW TODAY</div>
            <div class="panel-body">

                <div class="row">
                    <p class="mt-1 mx-4 p-2" style="text-align:center;">We not only save food losses, but demonstrate
                        its value in several use
                        cases.
                        Our CEO and Founder, Marcio Barradas was among the first to use these upcycled ingredients in
                        food 3D printing, to provide custom ingredient combinations supporting special diets, and
                        branding opportunities for fine-dining.
                        <br>
                        Taste our demo below!
                    </p>
                </div>

                <hr style="text-align:center; margin-bottom:10px; margin-top:10px;">
                <form id="reqsample_frm_two" method="post">
                    <label>Select the Structure
                    </label>
                    <input type="hidden" id="selectedModel" value="" name="model_name">
                    <div class="carousel">

                    </div>
                    <br>



                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group" style=" padding:10px;">
                                <label class="control-label">Select the Ingredients</label>
                                <br>

                                <label class="radio-inline"
                                    data-desc="Coconut is highly nutritious, rich in fiber, and packed with essential vitamins and minerals. It supports digestion, aids in weight management due to its satiety effect, and promotes heart health with its high levels of good cholesterol (HDL). Furthermore, coconut oil is believed to have antibacterial and antiviral properties, which can boost immunity."
                                    data-name="Coconut" data-code="#FFF8E1">
                                    <input type="radio" id="first_color" name="color" value="Coconut">
                                    <a href="#" data-toggle="tooltip" data-placement="top"
                                        title="Coconut is highly nutritious, rich in fiber, and packed with essential vitamins and minerals. It supports digestion, aids in weight management due to its satiety effect, and promotes heart health with its high levels of good cholesterol (HDL). Furthermore, coconut oil is believed to have antibacterial and antiviral properties, which can boost immunity.">Coconut</a>
                                    <div style="background: #FFF8E1; width: 60px; height: 20px;">
                                    </div>
                                </label>

                                <label class="radio-inline"
                                    data-desc="Mangoes are a nutrient-dense fruit packed with vitamins A, C, and E, as well as antioxidants. They aid digestion, boost immunity, and promote eye health. Their high fiber content aids satiety, potentially supporting weight management. Additionally, the antioxidants in mangoes may contribute to heart health and improved skin."
                                    data-name="Mango" data-code="#FFFDD0">
                                    <input type="radio" name="color" value="Mango">
                                    <a href="#" data-toggle="tooltip" data-placement="top"
                                        title="Mangoes are a nutrient-dense fruit packed with vitamins A, C, and E, as well as antioxidants. They aid digestion, boost immunity, and promote eye health. Their high fiber content aids satiety, potentially supporting weight management. Additionally, the antioxidants in mangoes may contribute to heart health and improved skin.">Mango</a>
                                    <div style="background: #FFFDD0; width: 60px; height: 20px;">
                                    </div>
                                </label>
                                <label class="radio-inline" data-desc="Maracuja is rich in dietary fiber, Vitamin C, and beneficial plant compounds like antioxidants, which support immune health, digestion, and heart health. Its low glycemic index also aids blood sugar control.

                                Mint leaves are packed with nutrients. They aid digestion, relieve headaches, and can improve sleep. Mint's antibacterial properties can improve oral health, and its refreshing aroma may enhance mood.
                                " data-name="Maracuja" data-code="#F0E68C">
                                    <input type="radio" name="color" value="maracuja">
                                    <a href="#" data-toggle="tooltip" data-placement="top" title="Maracuja is rich in dietary fiber, Vitamin C, and beneficial plant compounds like antioxidants, which support immune health, digestion, and heart health. Its low glycemic index also aids blood sugar control.

                                        Mint leaves are packed with nutrients. They aid digestion, relieve headaches, and can improve sleep. Mint's antibacterial properties can improve oral health, and its refreshing aroma may enhance mood.
                                        ">Maracuja</a>
                                    <div style="background: #F0E68C; width: 60px; height: 20px;">
                                    </div>
                                </label>

                                <label class="radio-inline" data-desc="Tangerines are high in Vitamin C and fiber, promoting a healthy immune system and aiding digestion. They contain antioxidants that support heart health and may help prevent chronic diseases.

                                Phycocyanin, found in blue-green algae like Spirulina, exhibits antioxidant, anti-inflammatory, and neuroprotective properties. It boosts the immune system, helps detoxify the body, and may improve overall energy levels.
                                " data-name="Tangerine" data-code="#D8A676">
                                    <input type="radio" name="color" value="Tangerine">
                                    <a href="#" data-toggle="tooltip" data-placement="top" title="Tangerines are high in Vitamin C and fiber, promoting a healthy immune system and aiding digestion. They contain antioxidants that support heart health and may help prevent chronic diseases.

                                        Phycocyanin, found in blue-green algae like Spirulina, exhibits antioxidant, anti-inflammatory, and neuroprotective properties. It boosts the immune system, helps detoxify the body, and may improve overall energy levels.
                                        ">Tangerine</a>
                                    <div style="background: #D8A676; width: 60px; height: 20px;">
                                    </div>
                                </label>

                                <label class="radio-inline" data-desc="Cherries are packed with nutrients and offer several health benefits. They're rich in antioxidants and anti-inflammatory compounds, which can help reduce inflammation and promote heart health. Their high fiber content aids digestion, while melatonin supports sleep regulation. They may also help in post-exercise recovery.
                                " data-name="Cherry" data-code="#FF7F7F">
                                    <input type="radio" name="color" value="Cherry">
                                    <a href="#" data-toggle="tooltip" data-placement="top"
                                        title="Cherries are packed with nutrients and offer several health benefits. They're rich in antioxidants and anti-inflammatory compounds, which can help reduce inflammation and promote heart health. Their high fiber content aids digestion, while melatonin supports sleep regulation. They may also help in post-exercise recovery.">Cherry</a>
                                    <div style="background: #FF7F7F; width: 60px; height: 20px;">
                                    </div>
                                </label>
                                <br>
                                <small id="color_description"></small>
                            </div>
                        </div>
                        <div class='col-md-6'>
                                <div class="form-group">
                                    <label class="control-label">On which day would You collect it?</label>
                                    <div class='input-group date' id=''>
                                        <!-- <input type="date" id="appointment_date" name="appointment_date"> -->
                                        <input type="text" id="appointment_date"  name="appointment_date">

                                    </div>
                                </div>
                            </div>
                            <div class='col-md-6'>
                                <div class="form-group">
                                    <label class="control-label">When?</label>
                                    <select class="form-control" name="appointment_slot" id="appointment_slot"  style="width: auto;" disabled>
                                        <option value="">Select day above</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="control-label">First Name</label>
                                <input type="text" class="form-control" name="first_name" id="first_name" required>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="control-label">Last Name</label>
                                <input type="text" class="form-control" name="last_name" id="last_name" required>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="control-label">Email</label>
                                <input type="text" class="form-control" name="email" id="email" required>
                            </div>
                        </div>

                        <div class="col-md-6" style=" margin-top:25px ">
                            <div class="form-group mt-2">
                                <label for="terms" class="control-label"></label>
                                <input type="checkbox" class="for" name="terms" id="terms"> I subscribe to <a
                                    href="https://moodbytes.tech/privacy-policy/" style="cursor: pointer;"
                                    target="_blank">MoodBytes</a> and <a href="https://solarpunk.buzz/privacy-policy/"
                                    target="_blank">Solar Punk</a> newsletter according to their privacy policy.
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-primary form_submit"
                        style="background-color: #00C3C7;">Manifest It!</button>
                </form>
            </div>
        </div>
    </div>

</body>
<script type="text/javascript">
    const sendDataToWebHook = () => {
        const formData = $('#reqsample_frm_two').serializeArray();
        const jsonData = {};

        $(formData).each(function (index, obj) {
            jsonData[obj.name] = obj.value;
        });

        const jsonString = JSON.stringify(jsonData);

        $.ajax({
            type: 'POST',
            url: 'https://hook.eu1.make.com/76hj4ct9uc5lehhf0dqvrl6vo8jdw4d4',
            data: jsonData,
            success: function (response) {
                Swal.fire({
                    icon: '',
                    title: "Please check your email and arrive a few minutes before your selected time!",
                    timer: 10000,
                    customClass: {
                        container: ' my-toast'
                    }
                });

            },
            error: function (xhr, status, error) {

            }
        });

    }


    const allSlots = [];

for (let hour = 10, minute = 20; hour <= 15 && (hour !== 15 || minute <= 20); minute += 20) {
    if (minute === 60) {
        hour++;
        minute = 0;
    }
    const timeString = `${hour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}`;
    allSlots.push(timeString);
}

console.log(allSlots);


    console.log(allSlots,"allSlots");

    function fetchAvailableSlots(date) {
        // Make an API call to fetch available slots for the selected date
        $.ajax({
            url: 'https://order.moodbytes.tech/current_slots.php',
            type: 'GET',
            data: {
                date: date
            },
            success: function (response) {
                // Update the options in the select element
                var slotsSelect = $('#appointment_slot');
                slotsSelect.empty();
                const slots = response?.slots || [];
                const availableSlots = allSlots.filter((ele) => !slots.includes(ele));
                if (availableSlots?.length>0) {
                    slotsSelect.prop('disabled', false);
                    slotsSelect.append($('<option>', {
                        value: '',
                        text: 'Select a time slot'
                    }));
                    $.each(availableSlots, function (i, slot) {
                        slotsSelect.append($('<option>', {
                            value: slot,
                            text: slot
                        }));
                    });
                } else {
                    slotsSelect.prop('disabled', true);
                    slotsSelect.append($('<option>', {
                        value: '',
                        text: 'No available slots for this date'
                    }));
                }
            },
            error: function (xhr, status, error) {
                console.error(error);
            }
        });
    }

    $(function () {
        var date =  new Date("2023/06/22");

        var maxdate = new Date("2023/06/23");


        // $('#datetimepicker1').datetimepicker({
        //     inline: true,
        //     minDate: date,
        //     maxDate: maxdate,
        //     step: 20,
        //     minTime: '10:20',
        //     maxTime: '17:10',
        //     defaultDate: tomorrow.toDate()
        // });

        // var datePicker = document.getElementById("appointment_date");

        // datePicker.min=date;
        // datePicker.max=maxdate;



        var picker = new Pikaday({
      field: document.getElementById('appointment_date'),
        minDate:date,
       maxDate: maxdate,  
      position: 'top left',
      reposition: false
     });


     const datePickerNew=document.getElementById('appointment_date');
     datePickerNew.addEventListener("change", function () {
            fetchAvailableSlots(datePickerNew.value);

        });



        $(document).on('click', '.radio-inline', function () {
            var html = $(this).attr('data-desc') + '</p>';
            $('#color_description').html(html)
        })
        $(document).on('click', '.form_submit', function () {
            // get all html
            var formData = (new FormData(document.getElementById("reqsample_frm_two")));


            let selectedStructure = document.querySelector("#selectedModel");
            if (selectedStructure.value === "") {
                alert("Please select a strcture.");
                return false;
            }

            let appointmentDate=document.getElementById('appointment_date');
            if(appointmentDate.value=== ""){
                alert("Please select the appointment date.");
                return false;
            }
            let appointmentSlot=document.getElementById('appointment_slot');
            if(appointmentSlot.value=== ""){
                alert("Please select the time slot.");
                return false;
            }


            if (!$('input[type=radio]:checked').size() > 0) {
                alert("Please select any color.");
                return false;
            }

            if (!$('input[type=radio]:checked').size() > 0) {
                alert("Please select any color.");
                return false;
            }

            if ($('#first_name').val() == "") {
                alert("Please enter first name.");
                return false;
            }
            if ($('#last_name').val() == "") {
                alert("Please enter last name.");
                return false;
            }
            var email = $('#email').val();

            // regular expression for email validation
            var emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

            // check if email is empty or invalid
            if (email == "") {
                alert("Please enter an email.");
                return false;
            } else if (!emailRegex.test(email)) {
                alert("Please enter a valid email.");
                return false;
            }


            $.ajax({
                type: "POST",
                dataType: 'json',
                contentType: false,
                processData: false,
                url: "send.php",
                data: formData,
                beforeSend: function () {
                    
                    $('.form_submit').attr('disabled', true)
                },
                complete: function () {
                    $('.form_submit').attr('disabled', false)
                },
                success: function (response) {
                    $('.form_submit').attr('disabled', false)
                    if (response.status) {
                        sendDataToWebHook();
                        Swal.fire(response.message);
                        location.reload()
                    } else {
                        Swal.fire(response.message);
                        return false;
                    }
                },
                error: function () {
                    $('.form_submit').attr('disabled', false)
                }
            });
         sendDataToWebHook();
        })
        
    });


    const carousel = document.querySelector(".carousel");
    // change your models as you require;
    const models = ["burger","chest", "ice cream", "turtle", "cat"]; // Example models
    let selectedModelInput = document.querySelector("#selectedModel");
    let selectedModelIndex = 0;

    models.forEach((model, index) => {
        const item = document.createElement("div");
        item.classList.add("carousel-item");
        const demo = document.createElement("div");
        demo.classList.add("demo");
        const viewer = document.createElement("model-viewer");
        viewer.setAttribute("id", `mv-${model}`);
        viewer.setAttribute("style", " ");
        viewer.setAttribute("shadow-intensity", "0");

        // the src can be a link or relative path of a file on your server, change accordingly
        viewer.setAttribute("src", model+'.glb')
        viewer.setAttribute("camera-controls", "");
        viewer.setAttribute("ar-status", "not-presenting");
        const label = document.createElement("label");
        label.appendChild(document.createTextNode(model));

        viewer.addEventListener("click", () => {
            selectedModelIndex = index;
            const modelViewers = document.querySelectorAll("model-viewer");
            modelViewers.forEach((mv) => {
                mv.style.border = "0px solid gray";
            });
            viewer.style.border = "2px solid rgb(0,195,199)";

            let selectedModel = "";
            if (selectedModelIndex >= 0 && selectedModelIndex < models.length) {
                selectedModel = models[selectedModelIndex];
            }
            selectedModelInput.value = selectedModel;
        });

        demo.appendChild(viewer);
        demo.appendChild(label);
        item.appendChild(demo);
        carousel.appendChild(item);
    });



</script>

</html>